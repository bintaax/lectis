{% extends 'base.html.twig' %}
{% block title %} Mon panier {% endblock %}

{% block body %}
<section class="px-6 py-10 max-w-4xl mx-auto">

    <h1 class="text-3xl font-bold mb-6">Mon panier</h1>

    <div id="panier-container">

        {% if panier is null or lignes is empty %}
            <div class="items-center justify-center text-center">            
            <i class="fa-solid fa-face-sad-tear text-6xl"></i>
            <p class="text-gray-500">Votre panier est vide.</p></div>

        {% else %}

            {% for ligne in lignes %}
                <div class="flex items-center gap-6 p-4 bg-white shadow rounded mb-4">

                 <img src="{{ asset('assets/img/' ~ ligne.livre.photo) }}" class="w-24 h-32 object-cover">
                    <div class="flex-1">

                        <h2 class="font-bold text-xl">{{ ligne.livre.titre }}</h2>

                        <div class="mt-2 flex items-center gap-4">
                            <button onclick="updateQtt({{ ligne.id }}, {{ ligne.quantite - 1 }})" class="text-white">−</button>
                            <span>{{ ligne.quantite }}</span>
                            <button onclick="updateQtt({{ ligne.id }}, {{ ligne.quantite + 1 }})"  class="text-white">+</button>
                        </div>

                        <p class="mt-2">
                            Sous-total :
                            <strong>{{ ligne.livre.prix * ligne.quantite }} €</strong>
                        </p>
                    </div>

                    <button class=" bg-transparent" onclick="deleteLine({{ ligne.id }})">
                        <i class="fa-solid fa-trash text-red-600"></i>
                    </button>

                </div>
            {% endfor %}

            <div class="text-right text-2xl font-bold mt-8">
                Total : {{ total }} €
            </div>
            <button class="text-white w-full mt-5">Valider la commande</button>
        {% endif %}
  
    </div>

</section>
{% endblock %}
